// (c) 2011-2013, Vladimir Agafonkin
// SunCalc is a JavaScript library for calculating sun/mooon position and light phases.
// https://github.com/mourner/suncalc
// git:bf5ee6377e8b829974046d02389d7bd05ee4d95f
(function(){function v(a){return new Date((a+0.5-r)*s)}function z(a,b){return n(c(a)*f(h)-p(b)*c(h),f(a))}function x(a,b){return A(c(b)*f(h)+f(b)*c(h)*c(a))}function B(a,b,d){return n(c(a),f(a)*c(b)-p(d)*f(b))}function C(a,b,d){return A(c(b)*c(d)+f(b)*f(d)*f(a))}function D(a){return e*(1.9148*c(a)+0.02*c(2*a)+3E-4*c(3*a))}function E(a){a=e*(357.5291+0.98560028*a);var b=D(a);a=a+b+102.9372*e+q;return{dec:x(a,0),ra:z(a,0)}}function F(a){var b=e*(134.963+13.064993*a),d=e*(93.272+13.22935*a);a=e*(218.316+
13.176396*a)+6.289*e*c(b);d=5.128*e*c(d);b=385001-20905*f(b);return{ra:z(a,d),dec:x(a,d),dist:b}}var q=Math.PI,c=Math.sin,f=Math.cos,p=Math.tan,A=Math.asin,n=Math.atan2,G=Math.acos,e=q/180,s=864E5,r=2440588,h=23.4397*e,g={getPosition:function(a,b,d){d=e*-d;b*=e;var c=a.valueOf()/s-0.5+r-2451545;a=E(c);d=e*(280.16+360.9856235*c)-d-a.ra;return{azimuth:B(d,b,a.dec),altitude:C(d,b,a.dec)}}},y=[[-0.83,"sunrise","sunset"],[-0.3,"sunriseEnd","sunsetStart"],[-6,"dawn","dusk"],[-12,"nauticalDawn","nauticalDusk"],
[-18,"nightEnd","night"],[6,"goldenHourEnd","goldenHour"]];g.addTime=function(a,b,d){y.push([a,b,d])};g.getTimes=function(a,b,d){d=e*-d;b*=e;a=Math.round(a.valueOf()/s-0.5+r-2451545-9E-4-d/(2*q));var l=9E-4+(0+d)/(2*q)+a,g=e*(357.5291+0.98560028*l),t=D(g),t=g+t+102.9372*e+q,n=x(t,0),l=2451545+l+0.0053*c(g)-0.0069*c(2*t),h={solarNoon:v(l),nadir:v(l-0.5)},u,p,w,k,m;u=0;for(p=y.length;u<p;u+=1)w=y[u],k=b,m=n,k=G((c(w[0]*e)-c(k)*c(m))/(f(k)*f(m))),m=t,k=2451545+(9E-4+(k+d)/(2*q)+a)+0.0053*c(g)-0.0069*
c(2*m),m=l-(k-l),h[w[1]]=v(m),h[w[2]]=v(k);return h};g.getMoonPosition=function(a,b,d){d=e*-d;b*=e;var c=a.valueOf()/s-0.5+r-2451545;a=F(c);d=e*(280.16+360.9856235*c)-d-a.ra;c=C(d,b,a.dec);c+=0.017*e/p(c+10.26*e/(c+5.1*e));return{azimuth:B(d,b,a.dec),altitude:c,distance:a.dist}};g.getMoonIllumination=function(a){var b=a.valueOf()/s-0.5+r-2451545;a=E(b);var b=F(b),d=G(c(a.dec)*c(b.dec)+f(a.dec)*f(b.dec)*f(a.ra-b.ra)),d=n(149598E3*c(d),b.dist-149598E3*f(d));return{fraction:(1+f(d))/2,angle:n(f(a.dec)*
c(a.ra-b.ra),c(a.dec)*f(b.dec)-f(a.dec)*c(b.dec)*f(a.ra-b.ra))}};"function"===typeof define&&define.amd?define(g):"undefined"!==typeof module?module.exports=g:window.SunCalc=g})();

// (c) 2013-2016, Matthew Petroff
// CW header code
var sun=document.getElementById("sun"),moon=document.getElementById("moon"),date=new Date,lat=41.887,lon=-73.043,sunTimes=SunCalc.getTimes(date,lat,lon),moonPos=SunCalc.getMoonPosition(date,lat,lon);
0<date-sunTimes.sunrise&&0>date-sunTimes.sunset?(sunPos=(date-sunTimes.sunrise)/(sunTimes.sunset-sunTimes.sunrise)*120+30,sun.style.webkitTransform="rotate("+sunPos+"deg)",sun.style.transform="rotate("+sunPos+"deg)"):(document.getElementById("cw-header").className+=" cw-header-n",document.getElementById("hill-center").className+=" hill-center-n",document.getElementById("hills-right").className+=" hills-n",document.getElementById("hills-left").className+=" hills-n",document.getElementById("trees0r").className+=
" trees0-n",document.getElementById("trees1r").className+=" trees1-n",document.getElementById("trees2r").className+=" trees2-n",document.getElementById("trees0l").className+=" trees0-n",document.getElementById("trees1l").className+=" trees1-n",document.getElementById("trees2l").className+=" trees2-n",document.getElementById("lake").className+=" lake-n");0<moonPos.altitude&&(moon.style.top=125-150*Math.sin(moonPos.altitude)+"px",moon.style.left=225+225*Math.sin(moonPos.azimuth)+"px");
var moonIllum=SunCalc.getMoonIllumination(date),crescent,amount;if(0.05<moonIllum.fraction){0.5>moonIllum.fraction?(crescent="1",amount=100-200*moonIllum.fraction):(crescent="0",amount=200*moonIllum.fraction-100);moon.style.webkitTransform="rotate("+moonIllum.angle+"rad)";moon.style.transform="rotate("+moonIllum.angle+"rad)";var path="M100,0 a100,100 0 1,0 0,200 a"+String(amount)+",100 0 1,"+crescent+"0,-200 z";document.getElementById("phase").setAttribute("d",path)}
0<date-sunTimes.sunset&&(3>date.getUTCHours()||12<date.getUTCHours())&&(document.getElementById("fire").className+=" fire");12<date.getUTCHours()&&21>date.getUTCHours()&&(document.getElementById("sunfish").className+=" sunfish");
// Image slider
if(document.getElementById("sImgNavHolderO")){for(var total=5,delay=5E3,current=0,previous=total-1,load=1,loaded=[!0],goToNext=!1,i=1;i<total;i++)loaded[i]=!1;document.getElementById("sImgNavHolderO").style.display="block";window.addEventListener("load",imgLoad,!1)}function imgLoad(){1==load&&setTimeout(nextImg,delay);var a=document.getElementById("sImg"+load);a.onload=function(){loaded[load]=!0;goToNext&&(goToNext=!1,nextImg());load++;load<total&&imgLoad()};a.srcset=a.getAttribute('data-srcset');a.src=a.getAttribute("data-src")}
function nextImg(){var a=(current+1)%total;loaded[a]?(document.getElementById("sImgNav"+current).style.opacity=0.5,document.getElementById("sImgNav"+a).style.opacity=1,0!=a?document.getElementById("sImg"+a).style.opacity=1:document.getElementById("sImg"+current).style.opacity=0,a==total-1&&(document.getElementById("sImg0").style.opacity=1),previous=current,current=a,setTimeout(nextImg,delay),setTimeout(hidePrevImg,delay/2)):goToNext=!0}
function hidePrevImg(){document.getElementById("sImg"+previous).style.opacity=0};
// Navagation bar
var navbar=document.getElementById("navbar"),toggle=document.getElementsByClassName("navbar-toggle")[0],collapse=document.getElementsByClassName("navbar-collapse")[0];switchScroll();function switchScroll(){185<window.scrollY&&768<=document.body.clientWidth?(navbar.classList.remove("navbar-static-top"),navbar.classList.add("navbar-fixed-top")):(navbar.classList.remove("navbar-fixed-top"),navbar.classList.add("navbar-static-top"))}
function toggleMenu(){collapse.classList.toggle("collapse");collapse.classList.toggle("in")}var dropdowns=document.getElementsByClassName("dropdown");function closeMenus(){for(var a=0;a<dropdowns.length;a++)dropdowns[a].getElementsByClassName("dropdown-toggle")[0].classList.remove("dropdown-open"),dropdowns[a].classList.remove("open")}
for(var i=0;i<dropdowns.length;i++)dropdowns[i].addEventListener("click",function(){if(768>document.body.clientWidth){var a=this.classList.contains("open");closeMenus();a||(this.getElementsByClassName("dropdown-toggle")[0].classList.toggle("dropdown-open"),this.classList.toggle("open"))}});function closeMenusOnResize(){768<=document.body.clientWidth&&(closeMenus(),collapse.classList.add("collapse"),collapse.classList.remove("in"))}document.addEventListener("scroll",switchScroll,!1);
window.addEventListener("resize",switchScroll,!1);window.addEventListener("resize",closeMenusOnResize,!1);toggle.addEventListener("click",toggleMenu,!1);
